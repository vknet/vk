---
layout: default
title: Метод Messages.GetHistory
permalink: messages/getHistory/
comments: true
---
# Метод Messages.GetHistory
Возвращает историю сообщений для указанного пользователя.

Страница документации ВКонтакте [messages.getHistory](https://vk.com/dev/messages.getHistory).

## Синтаксис
``` csharp
public MessagesGetObject GetHistory(MessagesGetHistoryParams @params)
```

## Параметры
Класс **`MessagesGetHistoryParams`** содержит следующие свойства:

+ **Offset** — Смещение, необходимое для выборки определенного подмножества сообщений, должен быть &gt;= 0, если не передан параметр start_message_id, и должен быть &lt;= 0, если передан. целое число
+ **Count** — Количество сообщений, которое необходимо получить (но не более 200). положительное число, по умолчанию 20, максимальное значение 200
+ **UserId** — Идентификатор пользователя, историю переписки с которым необходимо вернуть. строка
+ **PeerId** — Идентификатор назначения. 
Для групповой беседы: 
2000000000 + id беседы. 
Для сообщества: 
-id сообщества. 
 целое число, доступен начиная с версии 5.38
+ **StartMessageId** — Если значение &gt; 0, то это идентификатор сообщения, начиная с которого нужно вернуть историю переписки, если же передано значение -1, то к значению параметра offset прибавляется количество входящих непрочитанных сообщений в конце диалога (подробности см. ниже) целое число
+ **Rev** — 1 – возвращать сообщения в хронологическом порядке. 0 – возвращать сообщения в обратном хронологическом порядке (по умолчанию), недоступен при переданном start_message_id. целое число

## Результат
После успешного выполнения возвращает список объектов сообщений. 
В случае наличия в этом диалоге непрочитанных входящих сообщений, дополнительно (после поля count, перед полем items) в список будет добавлено поле unread с количеством непрочитанных входящих сообщений. 
Поля in_read и out_read являются идентификаторами прочтения. in_read возвращает идентификатор последнего прочитанного сообщения текущим пользователем, а out_read возвращает идентификатор последнего прочитанного сообщения собеседником. 
При переданном start_message_id в случае, если не было возвращено последнее сообщение в истории переписки (то есть сколько-то сообщений было пропущено), количество пропущенных сообщений (то есть реальное значение offset, которое использовалось для получения интервала истории) будет возвращено в поле skipped (вместе с count, items и иногда unread).

## Пример
``` csharp
var getHistory = _api.Messages.GetHistory(new MessagesGetHistoryParams{
	
});
```

## Версия Вконтакте API v.5.44
Дата обновления: 27.01.2016 19:50:49
